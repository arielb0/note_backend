import{c as P,r as w,p as q,J as Q,K as R,o as I,h as U,b as D,g as N,L as O,M as k,D as T,N as $,O as j,z as A,A as _,B as K,C as g,P as x,R as f,E as M,F as z,Q as J}from"./index.ea3d98df.js";import{u as E,d as L}from"./use-quasar.aa75ff50.js";var G=P({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(r,{slots:n,emit:d}){const s=N(),o=w(null);let i=0;const u=[];function b(e){const c=typeof e=="boolean"?e:r.noErrorFocus!==!0,v=++i,B=(t,a)=>{d("validation"+(t===!0?"Success":"Error"),a)},C=t=>{const a=t.validate();return typeof a.then=="function"?a.then(l=>({valid:l,comp:t}),l=>({valid:!1,comp:t,err:l})):Promise.resolve({valid:a,comp:t})};return(r.greedy===!0?Promise.all(u.map(C)).then(t=>t.filter(a=>a.valid!==!0)):u.reduce((t,a)=>t.then(()=>C(a).then(l=>{if(l.valid===!1)return Promise.reject(l)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return v===i&&B(!0),!0;if(v===i){const{comp:a,err:l}=t[0];if(l!==void 0&&console.error(l),B(!1,a),c===!0){const S=t.find(({comp:F})=>typeof F.focus=="function"&&O(F.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function m(){i++,u.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&k(e);const c=i+1;b().then(v=>{c===i&&v===!0&&(r.onSubmit!==void 0?d("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&k(e),d("reset"),T(()=>{m(),r.autofocus===!0&&r.noResetFocus!==!0&&p()})}function p(){$(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),c=>c.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}q(j,{bindComponent(e){u.push(e)},unbindComponent(e){const c=u.indexOf(e);c>-1&&u.splice(c,1)}});let V=!1;return Q(()=>{V=!0}),R(()=>{V===!0&&r.autofocus===!0&&p()}),I(()=>{r.autofocus===!0&&p()}),Object.assign(s.proxy,{validate:b,resetValidation:m,submit:y,reset:h,focus:p,getValidationComponents:()=>u}),()=>U("form",{class:"q-form",ref:o,onSubmit:y,onReset:h},D(n.default))}});const Y={__name:"NoteForm",setup(r){const n=E();return(d,s)=>(A(),_(G,null,{default:K(()=>[g(x,{placeholder:"Title",modelValue:f(n).title,"onUpdate:modelValue":s[0]||(s[0]=o=>f(n).title=o),borderless:""},null,8,["modelValue"]),g(x,{placeholder:"Tags",modelValue:f(n).tags,"onUpdate:modelValue":s[1]||(s[1]=o=>f(n).tags=o),borderless:""},null,8,["modelValue"]),g(x,{placeholder:"Body",modelValue:f(n).body,"onUpdate:modelValue":s[2]||(s[2]=o=>f(n).body=o),type:"textarea",flat:"",borderless:"",rows:"20"},null,8,["modelValue"])]),_:1}))}},Z=M({__name:"BackButton",props:{warnUser:{type:Boolean},route:{}},setup(r){const n=r,d=z(),s=L(),o=E();function i(){s.dialog({title:"Are you sure?",message:"Any changes will be lost. Are you sure?",cancel:!0}).onOk(()=>{u()})}function u(){o.clean(),d.push(n.route)}return(b,m)=>(A(),_(J,{flat:"",rounded:"",icon:"arrow_back",onClick:m[0]||(m[0]=y=>n.warnUser?i():u())}))}});export{Z as _,Y as a};
